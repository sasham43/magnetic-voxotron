/*! magnetic-voxotron 2016-10-05 */
angular.module("MagVoxApp",["ngRoute"]);var socket=io();angular.module("MagVoxApp").config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/views/splash.html",controller:"NowPlayingController",controllerAs:"npc"}).when("/spotify",{templateUrl:"/views/spotify.html",controller:"SpotifyController",controllerAs:"sc"}).when("/cd",{templateUrl:"/views/cd.html",controller:"CDController",controllerAs:"cc"}).when("/npr",{templateUrl:"/views/npr.html",controller:"NPRController",controllerAs:"nc"}).when("/settings",{templateUrl:"/views/settings.html",controller:"SettingsController",controllerAs:"setc"}),b.html5Mode(!0)}]),angular.module("MagVoxApp").controller("IndexController",["$http","$location",function(a,b){var c=this;c.nav=function(a){b.url(a)},console.log("index controller loaded.")}]),angular.module("MagVoxApp").controller("NowPlayingController",["$http","$scope",function(a,b){var c=this;c.currentService="",socket.on("spotify status",function(a){b.$apply(c.spotifyPlaying=a.playing),c.setText()}),socket.on("npr status",function(a){b.$apply(c.nprPlaying=a.playing),c.setText()}),c.setText=function(){c.nprPlaying&&b.$apply(function(){c.currentService="NPR"}),c.spotifyPlaying&&b.$apply(function(){c.currentService="Spotify"}),c.cdPlaying&&(c.currentService="CD"),c.nprPlaying||c.spotifyPlaying||c.cdPlaying||b.$apply(function(){c.currentService="Nothing Selected"})},c.checkService=function(){socket.emit("get npr status"),socket.emit("get spotify status")},c.checkService(),console.log("now playing controller loaded.")}]),angular.module("MagVoxApp").controller("SpotifyController",["$http","$scope",function(a,b){var c=this;c.trackList=[],c.showAlbumContainer=!0,c.showTrackList=!1,c.trackNumber=0,c.playing=!1,c.cmd=function(a){console.log("spotify command:",a),socket.emit("spotify command",a)},c.selectAlbum=function(a){socket.emit("spotify select album",{index:a}),c.showAlbumContainer=!1,c.showTrackList=!0},socket.on("spotify status",function(a){console.log("spotify status",a),b.$apply(function(){c.albums=a.albums,c.trackList=a.trackList,c.trackNumber=a.trackNumber})}),socket.on("spotify albums",function(a){b.$apply(function(){c.albums=a.albums}),console.log("spotify albums:",c.albums)}),c.status=function(){console.log("getting spotify status..."),socket.emit("get spotify status")},c.status(),socket.emit("spotify get albums"),console.log("spotify controller loaded.")}]),angular.module("MagVoxApp").directive("mvAlbum",function(){return{restrict:"E",scope:{album:"=album"},templateUrl:"/views/mv-album.html"}}),angular.module("MagVoxApp").directive("mvTrack",function(){return{restrict:"E",templateUrl:"mv-track.html"}}),angular.module("MagVoxApp").controller("NPRController",["$http","$scope",function(a,b){var c=this;c.playing=!1,c.title,socket.on("connected",function(a){console.log("socket connected.")}),socket.on("disconnected",function(a){console.log("socket disconnected.")}),socket.on("npr status",function(a){console.log("npr status:",a),b.$apply(c.playing=a.playing,c.title=a.title,c.started=a.started)}),socket.on("npr recommendations",function(a){console.log("npr recommendations:",a)}),c.go=function(){c.started?c.cmd("play"):socket.emit("get npr recommendations")},c.cmd=function(a){socket.emit("npr command",{cmd:a}),console.log("npr command:",a)},c.status=function(){socket.emit("get npr status")},c.status(),console.log("npr controller loaded.")}]),angular.module("MagVoxApp").controller("CDController",["$http",function(a){console.log("cd controller loaded.")}]),angular.module("MagVoxApp").controller("SettingsController",["$http",function(a){var b=this;b.updateSpotify=function(){socket.emit("spotify update albums")},console.log("settings controller loaded.")}]);